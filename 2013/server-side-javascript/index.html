<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>server side Javascript - Ist Javascript eine ernstzunehmende Alternative?</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/sky.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/tomorrow-night-eighties.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">

                <section data-markdown>
                    <script type="text/template">
                        ## Server side Javascript

                        Von [Daniel S. Reichenbach](http://marenkay.com) / [@marenkay](http://twitter.com/marenkay)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Achtung

                        Wir entwickeln mit PHP, Ruby, Java, .NET und zahlreichen Frameworks und &quot;sprechen&quot;
                        alle Javascript zur Umsetzung von Frontends für Web-Anwendungen.

                        Ist Javascript eine Alternative?
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Wer bin ich

                        Vater, Entwickler, Nerd

                        C/C++, PHP, Ruby, Python ...

                        [github.com/danielsreichenbach](http://github.com/danielsreichenbach)
                        [twitter.com/marenkay](http://twitter.com/marenkay)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Javascript auf dem Server

                        Javascript läuft in jedem Browser, jeder Web Entwickler kennt und
                        nutzt es. Die Browser Hersteller liefern sich ein Wettrennen um
                        die Leistung ihrer Engines.

                        Zahlreiche Bibliotheken erlauben es uns, schnell und einfach
                        Web Anwendungen zu bauen.

                        Können wir diese Vielfalt und Performance nicht auch für Server
                        Anwendungen einsetzen und schneller und besser entwickeln?
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Javascript auf dem Server

                        Ja! Wir können Javascript auf dem Server einsetzen, denn: aus
                        den Javascript Engines der Browser wurden in den letzten drei
                        Jahren eine Reihe von Umsetzungen vorgestellt:

                        * Node.js: basiert auf der Chrome V8 Javascript Engine
                        * SpiderMonkey: die Javascript Engine der Mozilla Browser
                        * Rhino: eine Java basierte Javascript Engine, ebenfalls aus
                          der Mozilla Familie
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Javascript auf dem Server

                        ![Szenario](./img/scenario.png)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Was bringt uns das

                        * Performance
                        * Rapid Prototyping
                        * eine Umgebung für das gesamte Projekt (?)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Node.js

                        Wir wählen Node.js aus, da wir hier eine Reihe von Vorteilen
                        gegenüber anderen Engines sehen:

                        * definierte API,
                        * aktive Community,
                        * eine Vielzahl von fertigen Bibliotheken für alle Anwendungsgebiete,
                        * etablierte Lösung im Produktiveinsatz
                    </script>
                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ## Performance

                                var http = require('http');

                                http.createServer(function (request, response) {
                                  response.writeHead(200, {'Content-Type': 'text/plain'});
                                  response.end('Hello World\n');
                                }).listen(8124);

                                console.log('Server running at http://127.0.0.1:8124/');

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance

                                > node example.js
                                Server running at http://127.0.0.1:8124/
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance

                            Wir führen 10000 Aufrufe mit jeweils 50 gleichzeitigen Aufrufen
                            durch:

                                ab -n 10000 -c 50 http://127.0.0.1:8124/
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance

                                Concurrency Level:      50
                                Time taken for tests:   0.620 seconds
                                Complete requests:      10000
                                Failed requests:        0
                                Write errors:           0
                                Total transferred:      1130000 bytes
                                HTML transferred:       120000 bytes
                                Requests per second:    16139.18 [#/sec] (mean)
                                Time per request:       3.098 [ms] (mean)
                                Time per request:       0.062 [ms] (mean, across all concurrent requests)
                                Transfer rate:          1780.98 [Kbytes/sec] received
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance
                            Mit der **zehnfachen** Anzahl an gleichzeitigen Aufrufen:

                                Concurrency Level:      500
                                Time taken for tests:   0.641 seconds
                                Complete requests:      10000
                                Failed requests:        0
                                Write errors:           0
                                Total transferred:      1130000 bytes
                                HTML transferred:       120000 bytes
                                Requests per second:    15611.10 [#/sec] (mean)
                                Time per request:       32.028 [ms] (mean)
                                Time per request:       0.064 [ms] (mean, across all concurrent requests)
                                Transfer rate:          1722.71 [Kbytes/sec] received
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance im Vergleich

                            Node.js als Dienst belegt gut 600MB Speicher um seine Arbeit zu erledigen.

                            Apache als Server benötigt zur Verbeitung der gleichen Aufgabe 64GB Speicher,
                            nginx kommt mit 2,5MB aus.
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance im Vergleich?

                            ![Memory usage and concurren requests](./img/nginx-apache-memory.png)
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Performance im Vergleich?

                            ![Requests per second](./img/nginx-apache-reqs-sec.png)
                        </script>
                    </section>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Node.js API

                        Die NodeJS API ist noch nicht stabil!

                        Eine Version 1.0 ist nicht vor 2014 in Sicht und war ursprünglich für
                        Anfang 2013 angekündigt.
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Bibliotheken für Node.js

                        Auch Node.js bringt einen Paketmanager mit, der uns erlaubt für viele
                        Gebiete vorgefertige Bibliotheken nachzuinstallieren.

                        Die sog. Node Packaged Modules werden von `npm` verwaltet. Eine Übersicht
                        zu verfügbaren Modulen bietet [npmjs.org](npmjs.org).

                        Aktuell stehen ca. 45.000 Bibliotheken zur Verfügung.
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Bibliotheken für Node.js

                        Die Mehrzahl der über `npm` bereitgestellten Module verlangt nach einer
                        bestimmten Version von Node.js. Meist ist man mit Version `0.8` oder Version
                        `0.10` gut bedient.

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Bibliotheken für Node.js

                        Daher gilt bei allen Modulen: auf Kompatibilität mit Node.js achten!

                        Bei Node.js Updates kann es gerade bei weniger bekannten Modulen vorkommen,
                        dass diese nicht mehr angepasst werden.
                    </script>
                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ## Entwicklung mit Node.js

                            Da bei Node.js nur ein Prozess läuft, sind nicht behandelte Fehler in der
                            Anwendung kritisch, da der Prozess dann beendet wird, die Anwendung "stirbt".

                            Daher: jede Exception muss behandelt werden.
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Entwicklung mit Node.js

                            Beispiel:

                                var fs = require('fs');

                                fs.readFile('somefile.txt', function (err, data) {
                                  if (err) throw err;
                                  console.log(data);
                                });

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Entwicklung mit Node.js

                            Ergebnis:

                                if (err) throw err;
                                                 ^
                                Error: ENOENT, open 'somefile.txt'

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Entwicklung mit Node.js

                                var domain = require('domain');
                                var d = domain.create();
                                var fs = require('fs');

                                d.on('error', function(err) {
                                  console.error(err);
                                });

                                d.run(function() {
                                  fs.readFile('somefile.txt', function (err, data) {
                                    if (err) throw err;
                                    console.log(data);
                                  });
                                });

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Entwicklung mit Node.js

                            In jedem Fall gilt: Crashes sollte man absichtlich für jedes erdenkliche
                            Problem provozieren und abfangen.

                            Im schlimmsten Fall gilt: Node.js überwachen und ggf. neu starten.
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            ## Entwicklung mit Node.js

                            Was hilft? Unit Tests!

                            * node-unit: [https://github.com/caolan/nodeunit](https://github.com/caolan/nodeunit)
                            * Mocha: [http://visionmedia.github.io/mocha/](http://visionmedia.github.io/mocha/)
                        </script>
                    </section>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Fazit

                        Javascript auf dem Server ist

                        * performant,
                        * schnell zu lernen,
                        * die Zukunft (?)

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## FIN

                        VON Daniel S. Reichenbach / marenkay.com
                    </script>
                </section>

            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                    // { src: 'plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } }
                    // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
